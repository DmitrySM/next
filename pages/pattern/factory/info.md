# Фабричный метод

В классическом ООП фабричный метод - это порождающий паттерн проектирования, который определяет общий интерфейс для создания объектов в супперклассе, позволяя подклассам изменять тип создаваемых объектов.

## Основные сущности паттерна

**Продукт** - общий интерфейс объектов, которые может произвести создатель или подкласс.

**Конкретный продукт** - содержит код реализации продукта. Продукты будут отличаться реализацией но интерфейс у них общий.

**Создатель** - фабричный метод который возвращает новый объект продукта.

**Конкретный создатель** - по своему реализует фабричный метод производя те или иные конкретные продукты.

## Адаптация на React

Если этот паттерн реализовать на React то получаются следующие аналогии:

**Продуктом** выступает тип react компонента возвращаемый из создателя.

```ts
export type ProductElement = (props: ProductProps) => JSX.Element;

export function factoryTrafficLights({ type }: Factory): ProductElement {
    ...
}
```

**Конкретным продуктом** будет сама реализация компонентов в данном случае это компоненты TrafficLight.tsx и StreetcarTrafficLight.tsx

**Создатель** это функция которая принимает параметры и на основе их возвращает компонент

```ts
export function factoryTrafficLights({ type }: Factory): ProductElement {
    const trafficLights = {
        [TrafficLights.carTrafficLight]: CarTrafficLight,
        [TrafficLights.streetcarTrafficLight]: StreetcarTrafficLight,
        default: CarTrafficLight,
    };
    
    return  trafficLights[type]
        ? trafficLights[type]
        : trafficLights.default;
}
```

**Конкретный создатель** это функция аналогична создателю но специализирующая на каком то конкретном типе продукта. 
Например при создании светофора для машин можно реализовать разные варианты в зависимости от входных параметров, к примеру добавить таймер переключения сигнала или вспомогательные секции для указания направления движения.